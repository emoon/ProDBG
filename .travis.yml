__common: &common
  language: rust
  rust: stable
  cache: cargo

matrix:
  include:
  - <<: *common
    os: linux
    dist: trusty
    env: COMPILER_NAME=gcc CXX=g++-5 CC=gcc-5
    addons:
      apt:
        packages:
          - g++-5
    script:
    - sudo add-apt-repository ppa:beineri/opt-qt57-trusty --yes
    - sudo apt-get update
    - sudo apt-get install qt57base mesa-common-dev
    - git clone https://github.com/deplinenoise/tundra.git
    - cd tundra
    - make
    - sudo make install
    - cd ..
    - export QT5=/opt/qt57; g++ --version ; tundra2 -v linux-gcc-debug
  - <<: *common
